<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>《javascript权威指南》学习笔记（10） | D_d</title>
  <meta name="author" content="D_d" />

  
  <meta name="description" content="这里是丁丁的博客" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <meta property="og:title" content="《javascript权威指南》学习笔记（10）" />
  <meta property="og:site_name" content="D_d" />

  
  

  
    <meta property="og:image" content="undefined" />
  

  <link href="http://o6yoa3nwp.bkt.clouddn.com/favicon.ico" rel="icon" />
 

  <link rel="alternate" href="/atom.xml" title="D_d" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

</head>


<body>
  <header id="header" class="inner"><br/><br/><br/><br/><br/><br/><br/>
<div class="alignleft1">
  <h1><a href="/">D_d</a></h1><br/>
  <h2><a href="/">——Welcome to D_d&#39;s Blog!——</a></h2><br/>
</div>
<nav id="main-nav" class="alignright1">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/">关于生活</a></li>
    
      <li><a href="/categories/technology">技术</a></li>
    
      <li><a href="/categories/technology/javascript">js</a></li>
    
      <li><a href="/categories/technology/css">HTML&amp;CSS</a></li>
    
      <li><a href="/categories/plan">哈哈哈计划赶不上变化</a></li>
    
  </ul>
</nav>
<br/><br/></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-07-05T02:53:43.000Z"><a href="/2016/07/05/《javascript权威指南》学习笔记（10）/">2016-07-05</a></time>
      
      
  
    <h1 class="title">《javascript权威指南》学习笔记（10）</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="脚本化HTTP篇"><a href="#脚本化HTTP篇" class="headerlink" title="脚本化HTTP篇"></a>脚本化HTTP篇</h1><p><img src="http://o6yo3ducz.bkt.clouddn.com/javascript-book-cover.jpg" title="javascript权威指南" width="200px"></p>
<p>HTTP：规定了Web浏览器如何从Web服务器获取文档，向Web服务器提交表单内容，Web服务器如何相应这些请求和提交（我的理解就是Web浏览器和服务器之间的交互）</p>
<h3 id="lt-img-gt-lt-script-gt-lt-iframe-gt-的src属性为url时会发起http的GET请求"><a href="#lt-img-gt-lt-script-gt-lt-iframe-gt-的src属性为url时会发起http的GET请求" class="headerlink" title="&lt;img&gt;,&lt;script&gt;,&lt;iframe&gt;的src属性为url时会发起http的GET请求"></a>&lt;img&gt;,&lt;script&gt;,&lt;iframe&gt;的src属性为url时会发起http的GET请求</h3><h3 id="Ajax特点："><a href="#Ajax特点：" class="headerlink" title="Ajax特点："></a>Ajax特点：</h3><p>使用脚本操纵HTTP和Web服务器进行数据交换，不会导致页面重载</p>
<h3 id="跨域"><a href="#跨域" class="headerlink" title="跨域"></a>跨域</h3><ul>
<li>XMLHttpRequest对象不可跨域，通过JSONP实现跨域</li>
<li>P代表函数名包裹/填充数据，用JS函数包裹对应响应数据，一般函数名为callback</li>
<li>JSON表明服务器响应必须用JSON格式</li>
<li>XHR2可以通过选择合适的CORS（Cross-origin Resource Sharing）允许跨域，测试XHR.withCredentials可以判断浏览器是否支持<h3 id="JSONP原理"><a href="#JSONP原理" class="headerlink" title="JSONP原理"></a>JSONP原理</h3>&lt;script&gt;可以不受限于同源策略跨域通信，此时服务器响应采用JSON编码的数据格式，故这种Ajax传输协议叫做JSONP<br>Tips：只可用于处理GET请求<h3 id="XMLHttpRequest对象（实现Ajax技术）"><a href="#XMLHttpRequest对象（实现Ajax技术）" class="headerlink" title="XMLHttpRequest对象（实现Ajax技术）"></a>XMLHttpRequest对象（实现Ajax技术）</h3>定义了用脚本操纵Http的API，包含GET请求及POST请求的能力，能用文本或document对象的形式返回服务器响应<h3 id="与Ajax同类的Comet技术"><a href="#与Ajax同类的Comet技术" class="headerlink" title="与Ajax同类的Comet技术"></a>与Ajax同类的Comet技术</h3></li>
<li>在Comet中，web服务器发起通信并异步发送消息到客户端，若web应用需响应服务端，会使用Ajax技术发送、请求数据</li>
<li>Tips：Ajax中浏览器从服务器“拉”数据，Comet中服务器向浏览器“推”数据<h3 id="XMLHttpRequest对象实现Ajax请求"><a href="#XMLHttpRequest对象实现Ajax请求" class="headerlink" title="XMLHttpRequest对象实现Ajax请求"></a>XMLHttpRequest对象实现Ajax请求</h3>1.实例化XMLHttpRequest：var xhr=new XMLHttpRequest();<br>2.调用其open()方法：xhr.open(‘method’,’url’,<del>bool</del>);<ul>
<li>method参数为http请求方式，GET/POST，不区分大小写，但一般大写</li>
<li>url为请求地址，跨域会报错</li>
<li>bool为一个可选参数，是否异步，设为false会同步，但同步时send()会阻塞UI一般不用<br>3.若为POST方式需设置请求头以方便服务器正常解码：xhr.setRequestHeader(‘content-Type’,’xxx’);<br>４.监听readystate：<pre><br>xhr.onreadystatechange=function (){<br>if(xhr.readystate==4&amp;&amp;xhr.status==200){<br>//请求完成不一定成功，xhr.status==200才成功<br>response……<br>}<br>}</pre><br>5.向服务器发送可选请求体：xhr.send();</li>
</ul>
</li>
<li>这一步才会启动网络，发送请求</li>
<li>GET方式无请求体，POST方式有请求体,可携带请求体参数</li>
<li>发送请求后，会返回响应response<h3 id="XMLHttpRequest对象的响应"><a href="#XMLHttpRequest对象的响应" class="headerlink" title="XMLHttpRequest对象的响应"></a>XMLHttpRequest对象的响应</h3></li>
<li>完整的http响应由状态码，响应头，响应主体组成</li>
<li>响应返回后，有一系列响应属性生效。此时为在响应返回时得到通知，要监听readystate事件</li>
<li>响应属性如下：<ul>
<li>status/statusText：以数字/文本形式返回http状态码</li>
<li>responseText/responseXML：响应主体文本/Document形式</li>
<li>getResponseHeader()/getAllResponseHeader():查询响应头</li>
</ul>
</li>
<li>readystate属性：代表http请求状态<ul>
<li>0：open()未调用</li>
<li>1：open()以调用</li>
<li>2：收到响应头</li>
<li>3：收到响应体</li>
<li>4：响应完成</li>
<li>Tips:理论上每次改变都会触发事件，但实际上不同浏览器有差别0、1一般不触发，4所有浏览器都会触发<h3 id="http请求无法完成的触发事件"><a href="#http请求无法完成的触发事件" class="headerlink" title="http请求无法完成的触发事件"></a>http请求无法完成的触发事件</h3></li>
</ul>
</li>
<li>timeout：超时触发事件</li>
<li>abort：请求中止触发事件</li>
<li>error：重定向太多阻止请求触发事件<h3 id="中止请求"><a href="#中止请求" class="headerlink" title="中止请求"></a>中止请求</h3></li>
<li>如果用户在指定时间内还没有输入字符，应中止表单请求</li>
<li>abort()方法取消正在进行的HTTP请求<h3 id="编码请求主体"><a href="#编码请求主体" class="headerlink" title="编码请求主体"></a>编码请求主体</h3></li>
<li>url编码：<ul>
<li>POST方式提交表单要进行URL编码，即16进制转义码替换特殊字符，’=’分开名字和值，’&amp;’分开名值对</li>
<li>对表单数据有正式的请求头，’content-Type’为’application/x-www-form-unlencoded’</li>
<li>将名值对用encodeURIComponent(‘xxx’);编码</li>
</ul>
</li>
<li>JSON编码<ul>
<li>JSON.stringify(‘xxx’);编码</li>
<li>JSON.parse(‘xxx’);解码</li>
</ul>
</li>
<li>上传文件<ul>
<li>POST请求发送文件内容时，type=’file’时有files属性，它是File对象的类数组对象</li>
<li>XHR2允许在send()中传入File对象实现上传文件。文件类型为二进制大对象（Blob）的子类型</li>
</ul>
</li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/technology/">technology</a>, <a href="/categories/technology/javascript/">javascript</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/javascript学习笔记/">javascript学习笔记</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  <div class="widget tag">
  <h3 class="title">关于 wo</h3>
  <ul class="entry">
    <li style="padding-left: 40px;"><img width="150px" src="http://o6yoa3nwp.bkt.clouddn.com/me.jpg" title="头像"/></li>
    <br/><hr/><br/>
    <li>丁丁</li>
    <li>双子座</li>
    <li>爱生活，爱技术，爱旅行，爱摄影</li><br/><hr/><br/>
    <li style="text-align: center;"><a target="_blank" href="http://weibo.com/u/2258194143?refer_flag=1001030102_&is_all=1">go to 我的微博</a></li>
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/technology/css/">css</a><small>2</small></li>
  
    <li><a href="/categories/technology/javascript/">javascript</a><small>12</small></li>
  
    <li><a href="/categories/plan/">plan</a><small>1</small></li>
  
    <li><a href="/categories/technology/">technology</a><small>14</small></li>
  
    <li><a href="/categories/technology/javascript/日常的问题/">日常的问题</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2016/07/08/《javascript权威指南》学习笔记（11）/">《javascript权威指南》学习笔记（11）</a>
      </li>
    
      <li>
        <a href="/2016/07/05/《javascript权威指南》学习笔记（10）/">《javascript权威指南》学习笔记（10）</a>
      </li>
    
      <li>
        <a href="/2016/06/14/《javascript权威指南》学习笔记（9）/">《javascript权威指南》学习笔记（9）</a>
      </li>
    
      <li>
        <a href="/2016/06/14/《javascript权威指南》学习笔记（8）/">《javascript权威指南》学习笔记（8）</a>
      </li>
    
      <li>
        <a href="/2016/06/06/《javascript权威指南》学习笔记（7）/">《javascript权威指南》学习笔记（7）</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/javascript学习笔记/">javascript学习笔记</a><small>11</small></li>
  
    <li><a href="/tags/哈哈哈！计划赶不上变化/">哈哈哈！计划赶不上变化</a><small>1</small></li>
  
    <li><a href="/tags/纯css实现多级nav/">纯css实现多级nav</a><small>1</small></li>
  
    <li><a href="/tags/纯css画三角形/">纯css画三角形</a><small>1</small></li>
  
    <li><a href="/tags/闭包和作用域/">闭包和作用域</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/javascript学习笔记/" style="font-size: 20px;">javascript学习笔记</a> <a href="/tags/哈哈哈！计划赶不上变化/" style="font-size: 10px;">哈哈哈！计划赶不上变化</a> <a href="/tags/纯css实现多级nav/" style="font-size: 10px;">纯css实现多级nav</a> <a href="/tags/纯css画三角形/" style="font-size: 10px;">纯css画三角形</a> <a href="/tags/闭包和作用域/" style="font-size: 10px;">闭包和作用域</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2016 D_d
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></footer>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id='bg'></div>
</body>
</html>