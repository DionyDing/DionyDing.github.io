<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8" />
  
  <title>《javascript权威指南》学习笔记（9） | D_d</title>
  <meta name="author" content="D_d" />

  
  <meta name="description" content="这里是丁丁的博客" />
  

  

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <meta property="og:title" content="《javascript权威指南》学习笔记（9）" />
  <meta property="og:site_name" content="D_d" />

  
  

  
    <meta property="og:image" content="undefined" />
  

  <link href="http://o6yoa3nwp.bkt.clouddn.com/favicon.ico" rel="icon" />
 

  <link rel="alternate" href="/atom.xml" title="D_d" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  


  <!-- baidu webmaster push -->
  <script src='//push.zhanzhang.baidu.com/push.js'></script>

</head>


<body>
  <header id="header" class="inner"><br/><br/><br/><br/><br/><br/><br/>
<div class="alignleft1">
  <h1><a href="/">D_d</a></h1><br/>
  <h2><a href="/">——Welcome to D_d&#39;s Blog!——</a></h2><br/>
</div>
<nav id="main-nav" class="alignright1">
  <ul>
    
      <li><a href="/">首页</a></li>
    
      <li><a href="/archives">归档</a></li>
    
      <li><a href="/">关于生活</a></li>
    
      <li><a href="/categories/technology">技术</a></li>
    
      <li><a href="/categories/technology/javascript">js</a></li>
    
      <li><a href="/categories/technology/css">HTML&amp;CSS</a></li>
    
      <li><a href="/categories/plan">哈哈哈计划赶不上变化</a></li>
    
  </ul>
</nav>
<br/><br/></header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
      
        <div class="icon"></div>
        <time datetime="2016-06-14T14:05:20.000Z"><a href="/2016/06/14/《javascript权威指南》学习笔记（9）/">2016-06-14</a></time>
      
      
  
    <h1 class="title">《javascript权威指南》学习笔记（9）</h1>
  

    </header>
    <div class="entry">
      
        <h1 id="event事件对象篇"><a href="#event事件对象篇" class="headerlink" title="event事件对象篇"></a>event事件对象篇</h1><p><img src="http://o6yo3ducz.bkt.clouddn.com/javascript-book-cover.jpg" title="javascript权威指南" width="200px"></p>
<h2 id="event代表事件状态，例如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态等"><a href="#event代表事件状态，例如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态等" class="headerlink" title="event代表事件状态，例如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态等"></a>event代表事件状态，例如事件在其中发生的元素、键盘按键的状态、鼠标的位置、鼠标按钮的状态等</h2><p><div style="color:red;font-size:20px;">event对象只在事件发生的过程中才有效！</div></p>
<h3 id="事件概述"><a href="#事件概述" class="headerlink" title="事件概述"></a>事件概述</h3><ul>
<li>事件是Web浏览器通知应用程序发生了什么事情</li>
<li>提及事件必须指明事件类型和目标<br>事件类型：说明发生了什么类型事件的字符串<br>时间目标：发生事件的对象或与之相关的对象</li>
<li>事件传播的三个阶段：<ul>
<li>捕获：目标处理程序调用之前，沿DOM树向下，从外向内捕获</li>
<li>目标对象本身的事件处理程序调用</li>
<li>冒泡：文档元素上发生某类型事件时会沿DOM树向上冒泡，当前DOM直到&lt;body&gt;,再到document，再到window<h3 id="注册事件处理程序"><a href="#注册事件处理程序" class="headerlink" title="注册事件处理程序"></a>注册事件处理程序</h3></li>
</ul>
</li>
<li><code>addEventListener(&#39;eventType&#39;,function,~~bool~~)</code>:三个参数为事件类型，发生时执行的函数，是否为捕获阶段（可省略，默认false）<br>IE9前使用<code>attachEvent(&#39;oneventType&#39;,function);</code>（tips:这里function中this指向window，<code>addEventListener()</code>中this指向事件目标）<br>可为同一事件注册多个函数，执行时会按注册顺序调用；<br>参数相同的情况下多次调用<code>addEventListener()</code>只注册一次</li>
<li>通过JS中对应属性设置：事件处理程序属性名称由”on”+”eventType”组成，全部小写</li>
<li>通过HTML属性设置：事件处理程序属性名称由”on”+”eventType”组成，全部小写。但为保持内容与行为分离，不应采用这种方式<h3 id="事件移除与取消"><a href="#事件移除与取消" class="headerlink" title="事件移除与取消"></a>事件移除与取消</h3></li>
<li>移除：<code>removeEventListener(&#39;eventType&#39;,function,~~bool~~)</code>参数必须和注册时相同</li>
<li>设置HTML属性注册事件处理程序，将返回值置为false，浏览器会取消默认行为，但这只对属性注册的程序有效</li>
<li>取消事件默认行为：<code>preventDefault()</code></li>
<li>阻止事件传播：<code>stopPropagation()</code>,可在传播期间任何时间调用<br>IE9以下不支持，通过将cancelBuble置为true阻止<h3 id="事件处理程序执行环境为其定义时的作用域，而不是调用时的作用域；但HTML属性中的事件处理程序会被转为能存取全局变量的顶级函数"><a href="#事件处理程序执行环境为其定义时的作用域，而不是调用时的作用域；但HTML属性中的事件处理程序会被转为能存取全局变量的顶级函数" class="headerlink" title="事件处理程序执行环境为其定义时的作用域，而不是调用时的作用域；但HTML属性中的事件处理程序会被转为能存取全局变量的顶级函数"></a>事件处理程序执行环境为其定义时的作用域，而不是调用时的作用域；但HTML属性中的事件处理程序会被转为能存取全局变量的顶级函数</h3><h3 id="事件处理程序的调用顺序"><a href="#事件处理程序的调用顺序" class="headerlink" title="事件处理程序的调用顺序"></a>事件处理程序的调用顺序</h3></li>
<li>通过JS对应属性及HTML属性注册的程序优先调用</li>
<li><code>addEventListener()</code>按注册顺序调用</li>
<li><code>attachEvent()</code>可能按任意顺序调用<h3 id="事件传播"><a href="#事件传播" class="headerlink" title="事件传播"></a>事件传播</h3></li>
<li>三个阶段：捕获、事件处理程序调用、冒泡</li>
<li>当需要在大量单独的文档元素上注册处理程序时，可在其共同的祖先元素上注册</li>
<li>特殊冒泡行为：<ul>
<li>focus,blur,scroll不冒泡</li>
<li>load冒泡至document对象停止，文档全部加载完才会冒泡至window对象</li>
</ul>
</li>
<li>捕获常用于处理鼠标拖放，因为拖放目标不能是元素内部的子元素<h3 id="文档加载事件"><a href="#文档加载事件" class="headerlink" title="文档加载事件"></a>文档加载事件</h3></li>
<li>load:直到文档和所有图片加载完毕才发生（load发生前触发脚本可以提升web应用启动时间）</li>
<li>DOMContentLoaded：文档加载完毕且所有延迟脚本执行完毕触发</li>
<li>readystatechange：状态改变触发，在load事件前触发<h3 id="鼠标事件"><a href="#鼠标事件" class="headerlink" title="鼠标事件"></a>鼠标事件</h3></li>
<li>click：按下并释放鼠标按键时触发</li>
<li>contextmenu：单击鼠标右键上下文菜单即将出现时触发，可取消默认行为</li>
<li>dbclick：双击鼠标触发</li>
<li>mousedown：按下鼠标按键时触发</li>
<li>mouseup：释放鼠标按键时触发</li>
<li>mouseout：离开元素时触发（mouseleave为不冒泡的mouseout）</li>
<li>mouseover：进入元素悬停时触发（mouseenter为不冒泡的mouseover）</li>
<li>mousemove：移动鼠标时触发</li>
<li>tips：<br>传递给鼠标事件的event对象有clientX,clientY属性，指示鼠标位置的窗口坐标<br>event对象有altkey,ctrlkey,shiftkey,metakey等属性指定鼠标事件发生时该键有没有按下<h3 id="鼠标滚轮事件"><a href="#鼠标滚轮事件" class="headerlink" title="鼠标滚轮事件"></a>鼠标滚轮事件</h3></li>
<li>mousewheel:默认滚动或缩放文档，可阻止默认操作<br>传递给事件处理程序的事件对象event有wheelDelta属性，指定滚轮有多远<br>Firefox中用DOMMouseScroll取代mousewheel，用detail取代wheelDelta<h3 id="文本事件"><a href="#文本事件" class="headerlink" title="文本事件"></a>文本事件</h3></li>
<li>keydown:按下键盘（包括辅助键、功能键、字母数字键）</li>
<li>keypress:keydown产生可打印字符时，在keydown和keyup之间触发，文本真正插入前触发，表输入单个字符（可能需用string.fromCharCode()转为字符串才生效）</li>
<li>keyup:键盘释放（包括辅助键、功能键、字母数字键）</li>
<li>textinput：无论何时用户输入文本都会触发，不管来源（有兼容性问题）</li>
<li>相关event对象有keycode属性，指定按下的键是哪个<ul>
<li>可打印字符keycode值为unicode编码</li>
<li>字母键keycode值总为大写</li>
</ul>
</li>
<li>相关event对象有altkey,ctrlkey,shiftkey,metakey属性，事件发生时对应辅助键按下值为true<h3 id="事件处理程序定义时要传入参数e代表event对象！"><a href="#事件处理程序定义时要传入参数e代表event对象！" class="headerlink" title="事件处理程序定义时要传入参数e代表event对象！"></a>事件处理程序定义时要传入参数e代表event对象！</h3><h3 id="event对象的target属性：触发事件的元素（IE下为srcElement属性）"><a href="#event对象的target属性：触发事件的元素（IE下为srcElement属性）" class="headerlink" title="event对象的target属性：触发事件的元素（IE下为srcElement属性）"></a>event对象的target属性：触发事件的元素（IE下为srcElement属性）</h3><h3 id="event对象的currentTarget属性：事件绑定的节点"><a href="#event对象的currentTarget属性：事件绑定的节点" class="headerlink" title="event对象的currentTarget属性：事件绑定的节点"></a>event对象的currentTarget属性：事件绑定的节点</h3><h3 id="以上两者在事件委托时不同（事件委托-事件代理：利用事件会冒泡到父节点，通过父节点监听事件，再判断是父节点下哪个节点触发，做相应处理）"><a href="#以上两者在事件委托时不同（事件委托-事件代理：利用事件会冒泡到父节点，通过父节点监听事件，再判断是父节点下哪个节点触发，做相应处理）" class="headerlink" title="以上两者在事件委托时不同（事件委托/事件代理：利用事件会冒泡到父节点，通过父节点监听事件，再判断是父节点下哪个节点触发，做相应处理）"></a>以上两者在事件委托时不同（事件委托/事件代理：利用事件会冒泡到父节点，通过父节点监听事件，再判断是父节点下哪个节点触发，做相应处理）</h3>一个事件委托的例子：<pre><br>window.onload=function (){<br>var oUL=document.getElementById(‘ul’);<br>oUL.addEventListener(‘mouseover’,overFun,false);<br>oUL.addEventListener(‘mouseout’,outFun,false);<br>function overFun(e){<br>  var e=e||window.e;<br>  var target=e.target||e.srcElement  //兼容IE<br>  if(target.nodeName.toLowerCase()==’li’){<pre><code>target.style.background=&apos;red&apos;;
</code></pre>  }<br>}<br>function outFun(e){<pre><code>var e=e||window.e;
var target=e.target||e.srcElement  //兼容IE
if(target.nodeName.toLowerCase()==&apos;li&apos;){
  target.style.background=&apos;yellowgreen&apos;;
}
</code></pre>  }<br>}<br></pre></li>
</ul>

      
    </div>
    
    <footer>
        <div class="alignright">
          
          <a href='javascript:void(0)' class="share-link bdsharebuttonbox" data-cmd="more">分享</a>
        </div>
        
  
  <div class="categories">
    <a href="/categories/technology/">technology</a>, <a href="/categories/technology/javascript/">javascript</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/javascript学习笔记/">javascript学习笔记</a>
  </div>

        <!-- partial('post/share') -->
      <div class="clearfix"></div>
    </footer>
  </div>
</article>



</div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="搜索">
    <input type="hidden" name="q" value="site:yoursite.com">
  </form>
</div>

  <div class="widget tag">
  <h3 class="title">关于 wo</h3>
  <ul class="entry">
    <li style="padding-left: 40px;"><img width="150px" src="http://o6yoa3nwp.bkt.clouddn.com/me.jpg" title="头像"/></li>
    <br/><hr/><br/>
    <li>丁丁</li>
    <li>双子座</li>
    <li>爱生活，爱技术，爱旅行，爱摄影</li><br/><hr/><br/>
    <li style="text-align: center;"><a target="_blank" href="http://weibo.com/u/2258194143?refer_flag=1001030102_&is_all=1">go to 我的微博</a></li>
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">分类</h3>
  <ul class="entry">
  
    <li><a href="/categories/technology/css/">css</a><small>2</small></li>
  
    <li><a href="/categories/technology/javascript/">javascript</a><small>10</small></li>
  
    <li><a href="/categories/plan/">plan</a><small>1</small></li>
  
    <li><a href="/categories/technology/">technology</a><small>12</small></li>
  
    <li><a href="/categories/technology/javascript/日常的问题/">日常的问题</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">最新文章</h3>
  <ul class="entry">
    
      <li>
        <a href="/2016/06/14/《javascript权威指南》学习笔记（9）/">《javascript权威指南》学习笔记（9）</a>
      </li>
    
      <li>
        <a href="/2016/06/14/《javascript权威指南》学习笔记（8）/">《javascript权威指南》学习笔记（8）</a>
      </li>
    
      <li>
        <a href="/2016/06/06/《javascript权威指南》学习笔记（7）/">《javascript权威指南》学习笔记（7）</a>
      </li>
    
      <li>
        <a href="/2016/06/06/《javascript权威指南》学习笔记（6）/">《javascript权威指南》学习笔记（6）</a>
      </li>
    
      <li>
        <a href="/2016/05/26/黑魔法——纯css画一个三角形/">黑魔法——纯css画一个三角形</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">标签</h3>
  <ul class="entry">
  
    <li><a href="/tags/javascript学习笔记/">javascript学习笔记</a><small>9</small></li>
  
    <li><a href="/tags/哈哈哈！计划赶不上变化/">哈哈哈！计划赶不上变化</a><small>1</small></li>
  
    <li><a href="/tags/纯css实现多级nav/">纯css实现多级nav</a><small>1</small></li>
  
    <li><a href="/tags/纯css画三角形/">纯css画三角形</a><small>1</small></li>
  
    <li><a href="/tags/闭包和作用域/">闭包和作用域</a><small>1</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/javascript学习笔记/" style="font-size: 20px;">javascript学习笔记</a> <a href="/tags/哈哈哈！计划赶不上变化/" style="font-size: 10px;">哈哈哈！计划赶不上变化</a> <a href="/tags/纯css实现多级nav/" style="font-size: 10px;">纯css实现多级nav</a> <a href="/tags/纯css画三角形/" style="font-size: 10px;">纯css画三角形</a> <a href="/tags/闭包和作用域/" style="font-size: 10px;">闭包和作用域</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  <p>
  
  &copy; 2016 D_d
  
  All rights reserved.</p>
  <p>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></p>
</div>
<div class="clearfix"></div>

<script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"1","bdMiniList":false,"bdPic":"","bdStyle":"2","bdSize":"16"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script></footer>
  <script src="http://apps.bdimg.com/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


<div id='bg'></div>
</body>
</html>